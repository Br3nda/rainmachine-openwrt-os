--- a/drivers/mtd/devices/m25p80.c
+++ b/drivers/mtd/devices/m25p80.c
@@ -929,6 +929,8 @@ static const struct spi_device_id *jedec
 
 	ext_jedec = id[3] << 8 | id[4];
 
+	dev_err(&spi->dev, "Found JEDEC id %06x ext %04x\n", jedec, ext_jedec);
+
 	for (tmp = 0; tmp < ARRAY_SIZE(m25p_ids) - 1; tmp++) {
 		info = (void *)m25p_ids[tmp].driver_data;
 		if (info->jedec_id == jedec) {
@@ -1030,11 +1032,14 @@ static int m25p_probe(struct spi_device
 			id = jid;
 			info = (void *)jid->driver_data;
 		}
+
+		/* Read UDID for Winbond chips */
+		if ((info->jedec_id & 0xff0000) == 0xef0000)
+			udid_read(spi);
+		else
+			dev_warn(&spi->dev, "Can't read udid not a known winbond chip (%06x)\n", info->jedec_id);
 	}
 
-	/* Read UDID for Winbond chips */
-	if (info->jedec_id == 0xef4018) 
-		udid_read(spi);
 
 	flash = kzalloc(sizeof *flash, GFP_KERNEL);
 	if (!flash)
